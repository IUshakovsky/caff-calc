<!-- Optimized script loading for better performance -->
<script src="{{ '/assets/js/script.js' | relative_url }}" defer></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>

<!-- Performance optimizations script -->
<script>
  // Device-specific optimizations
  document.addEventListener('DOMContentLoaded', function() {
    // Desktop optimizations
    if (window.innerWidth > 768) {
      // Mark the title as a high priority element
      const title = document.querySelector('.title');
      if (title) {
        title.setAttribute('fetchpriority', 'high');
      }
    } 
    // Mobile optimizations
    else {
      // Apply system font as fallback first for faster rendering
      document.body.classList.add('mobile');
      
      // Use fast system fonts until web fonts load
      const fontFallback = document.createElement('style');
      fontFallback.textContent = '.mobile h1, .mobile .title { font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; }';
      document.head.appendChild(fontFallback);
      
      // Set dimensions on critical elements to prevent layout shifts
      const criticalElements = [
        '.navbar', '.header-area', '.title', '.brand-icon img'
      ];
      
      criticalElements.forEach(selector => {
        const elements = document.querySelectorAll(selector);
        elements.forEach(el => {
          // Store current dimensions to prevent layout shifts
          el.style.minHeight = el.offsetHeight + 'px';
        });
      });
    }
  });
</script>
